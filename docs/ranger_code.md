## Python

Взаимодействие с датчиком расстояния на примере **Ranger_read.py**

Импорт необходимых модулей

Ranger - модуль для работы с датчиком расстояния

time - модуль необходимый для реализации задержки между измерениями  расстояния

bus_handler - модуль для инициализации шины передачи данных
:
```python
import Ranger
import time
import bus_handler
```


Определение последовательного порта интерфейсного блока:
```python
port        = '/dev/RS_485'
```

Адрес датчика расстояния, по умолчанию адрес датчика в наборе - "1":
```python
sensor_id   = 1
```

Инициализация шины передачи данных:
```python
master = bus_handler.Bus(port = port, baudrate = 460800, debug = False, timeout = 1.0)
```

Создание объекта - датчика расстояния.
```python
sensor = Ranger.Sensor(sensor_id ,master.bus)
```

Установка значения измеренной дистанции (мм), ниже которого сработает световая индикация. ЗЕЛЕНЫЙ - ИК датчик, СИНИЙ - УЗ датчик:
```python
sensor.set_min_dist(800) 
```

Отправка команды для измерения расстояния:
```python
sensor.trig_sensor()
```

Задержка перед получением данных о расстоянии. Ожидание прохождения звука от излучателя и обратно. Здесь установлено время **с запасом**. Расчет времени = (макс.дист. / скорость звука) * 2 таким образом (2.5 / 343)*2 = 0.014:


```python
time.sleep(0.1)
```

Чтение данных с датчика расстояния. Функция возвращает словарь c ключами: 

- "IR_distance"
 
- "US_distance"

Измеренные расстояния представлены в **мм**.
```python
vals = sensor.read_sensor()
```

:information_source:  [Описание библиотеки датчика расстояния на Python](https://github.com/Promobot-education/robox/blob/master/docs/python/ranger_py.md)


## C

Взаимодействие с датчиком расстояния на примере **Ranger_read.с**

Включение библиотек:
Ranger.h - библиотека для работы с датчиком расстояния
bus_handler.h - библиотека для взаимодействия с последовательным портом
```c
#include "Ranger.h"
#include "bus_handler.h"
```

Объявление структуры данных для чтения значений с датчика.
```c
struct sensor_data data;
```

Структура имеет вид:
```c
struct sensor_data {
   uint8_t US_distance;
   uint8_t IR_distance;
};
```

Выставление адреса датчика расстояния:
```c
int sensor_addr = 1;
```


Инициализация последовательного порта для работы с датчиком. Вывод отладочной информации отключен.
```c
init_port("/dev/RS_485",false)
```

Отправка команды на измерение расстояния
```c
trig_sensor(sensor_addr);
```

Задержка перед получением данных о расстоянии
```c
usleep(10000);
```

Чтение измеренных значений расстояния
```c
data = read_sensor(sensor_addr);
```

:information_source: [Описание библиотеки датчика расстояния на C](https://github.com/Promobot-education/robox/blob/master/docs/c/ranger_c.md)